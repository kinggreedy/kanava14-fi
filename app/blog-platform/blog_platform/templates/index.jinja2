{% extends "layout.jinja2" %}

{% block content %}
<div class="content">
    {% if request.authenticated_userid %}
        Welcome <strong>{{ user.get_author() }}</strong> ::
        <a href="{{ request.route_url('logout') }}">Sign Out</a>
    {% else %}
        <form action="{{ request.route_url('login') }}" method="post" class="form-inline">
            <div class="form-group">
                <input type="text" name="username" class="form-control" placeholder="Username">
            </div>
            <div class="form-group">
                <input type="password" name="password" class="form-control" placeholder="Password">
            </div>
            <div class="form-group">
                <input type="submit" value="Sign in" class="btn btn-default">
            </div>
        </form>
        <a href="{{ request.route_url('register') }}">Register here</a>
    {% endif %}

    {% if paginator.items %}
        <h2>Blog entries</h2>
        <ul>
            {% for entry in paginator.items %}
                <li>
                    <a href="{{ request.route_url('post', id=entry.id, slug=entry.slug) }}">
                        {{ entry.title }}
                    </a>
                </li>
            {% endfor %}
        </ul>
        {{ paginator.pager() | safe }}
    {% else %}
        <p>No blog entries found.</p>
    {% endif %}
    <p><a href="{{ request.route_url('post_action',action='create') }}">
        Create a new blog entry</a></p>
</div>
{% endblock content %}
